<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><link href="http://gmpg.org/xfn/11" rel="profile"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title>For-each loop (foreach)</title><link rel="stylesheet" href="//osmlab.github.io/learnoverpass//css/main.css"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png"><link href="/favicon.png" rel="icon"><link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'><link href="" rel="alternate" type="application/rss+xml" title="LearnOverpass &middot; " /><meta name="description" content=""><meta name="keywords" content=""> </head><body><div class="row"><div class="docs-list"> <header><a href="//osmlab.github.io/learnoverpass//"><h1 class="header-title"> LearnOverpass</h1></a></header><ul>  <li class="docs-list-title"> <strong>Block Queries</strong></li> <li class=""> <a href="/learnoverpass/en/docs/block-queries/union/">Union</a></li> <li class=""> <a href="/learnoverpass/en/docs/block-queries/difference/">Difference</a></li> <li class="docs-list-active"> <a href="/learnoverpass/en/docs/block-queries/foreach/">For-each loop (foreach)</a></li>  <li class="docs-list-title"> <strong>Standalone Queries</strong></li> <li class=""> <a href="/learnoverpass/en/docs/standalone-queries/item/">Item</a></li> <li class=""> <a href="/learnoverpass/en/docs/standalone-queries/recurse-up/">Recurse Up (&lt;)</a></li>  <li class="docs-list-title"> <strong>Filters</strong></li> <li class=""> <a href="/learnoverpass/en/docs/filters/tag/">By Tag</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/bbox/">Bounding Box</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/recurse/">Recurse (n, w, r, bn, bw, br)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/input-set/">By Input Set</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/element-id/">By Element Id</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/around/">Relative to other elements (around)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/polygon/">By polygon (poly)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/newer/">Newer</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/changed/">By date of change (changed)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/user/">By user (user, uid)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/area/">By area (area)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/pivot/">Area pivot (pivot)</a></li>  <li class="docs-list-title"> <strong>Actions</strong></li> <li class=""> <a href="/learnoverpass/en/docs/actions/print/">Print (out)</a></li>  </ul></div><div class="docs-content"><div class="content"> <script>
  (function() {
    var cx = '015815945200332182951:xrisyx6jrce';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script><gcse:search></gcse:search><h1 id="post-title"> For-each loop (foreach) <small> <a class="docs-improve" href="https://github.com/osmlab/learnoverpass/edit/master/content/en/docs/block-queries/foreach.md">Improve page</a></small></h1><p><p>The foreach block statement is written as the keyword foreach, followed by a pair of parentheses. Inside these parentheses, any sequence of statements can be placed, including nested union and foreach statements.</p>

<p>It takes an input set. It produces no result set. The foreach statement loops over the content of the input set, once for every element in the input set.</p>

<p>Example:</p>

<pre><code>way[name=&quot;Foo&quot;];
foreach(
  (
    ._;
    &gt;;
  );
  out;
);
</code></pre>

<p>For each way that has a name tag with value &ldquo;Foo&rdquo;, this prints the nodes that belong to this way immediately followed by the way itself. In detail, the result set of way[name=&ldquo;Foo&rdquo;] is taken as input set. Then, for each element in this input set the loop body is executed once. Inside the loop body the union of the element and its nodes is taken. Then this union is printed. Note that during execution, each printed subset in an iteration is independant of subsets printed in other iterations, possibly resulting in duplicate objects in the global output (no union is computed by the out statement within the loop).</p>

<p>The input set of the foreach statement can be taken from a variable with the usual postfix notation:</p>

<p>Example:</p>

<pre><code>foreach.a(...);
</code></pre>

<p>This loops over the content of set a instead of the default set &ldquo;_&rdquo;.</p>

<p>The name of the variable to put the loop element into can also be chosen by adding a postfix immediately before the opening parenthese.</p>

<p>Example:</p>

<pre><code>foreach-&gt;.b(...);
</code></pre>

<p>This puts the element to loop over into the variable b. Without it, the foreach statement does not puts the elements into any set. Example for both input and loop set changed:</p>

<pre><code>foreach.a-&gt;.b(...);
</code></pre>

<p><div class="docs-repl">  <textarea>
// get all bank nodes in coordinates
(
  node[amenity=bank]
  (47.0678,15.4401658,47.069,15.4501658);
  &gt;;
);
// foreach bank node, print out adjacent nodes
foreach-&gt;.bank_set(
  node(around.bank_set:15)-&gt;.adjacent_set;
  (.adjacent_set);
  out meta;
);
</textarea><div class="docs-repl-result">  <iframe src="http://overpass-turbo.eu/master/map.html?Q=%0a%2f%2f%20get%20all%20bank%20nodes%20in%20coordinates%0a%28%0a%20%20node%5bamenity%3dbank%5d%0a%20%20%2847.0678%2c15.4401658%2c47.069%2c15.4501658%29%3b%0a%20%20%3e%3b%0a%29%3b%0a%2f%2f%20foreach%20bank%20node%2c%20print%20out%20adjacent%20nodes%0aforeach-%3e.bank_set%28%0a%20%20node%28around.bank_set%3a15%29-%3e.adjacent_set%3b%0a%20%20%28.adjacent_set%29%3b%0a%20%20out%20meta%3b%0a%29%3b%0a"  seamless="seamless" frameBorder="0" width="100%;"></iframe><textarea></textarea> <a class="docs-repl-change-output button" href="#">Data</a></div></div></p>
</p> <footer><p>Website released under MIT License. Documentation and Courses under GNU FDL. &copy; 2015</p> <small class="language-switch">     <a lang='en' href="//osmlab.github.io/learnoverpass//en/docs/block-queries/foreach/">English</a> | <a lang='de' href="//osmlab.github.io/learnoverpass//de/docs/block-queries/foreach/">Deutsch</a></small></footer></div></div></div> <script src="//osmlab.github.io/learnoverpass//js/bundle.js"></script> </body></html>