<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><link href="http://gmpg.org/xfn/11" rel="profile"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title>Recurse (n, w, r, bn, bw, br)</title><link rel="stylesheet" href="//osmlab.github.io/learnoverpass//css/main.css"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png"><link href="/favicon.png" rel="icon"><link href='https://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'><link href="" rel="alternate" type="application/rss+xml" title="LearnOverpass &middot; "/><meta name="description" content=""><meta name="keywords" content=""> </head><body><div class="exercise-contrib"><div> <a href="https://github.com/osmlab/learnoverpass/blob/master/CONTRIB.md">Contribute to project</a></div></div><div class="row"><div class="docs-list"> <header><a href="//osmlab.github.io/learnoverpass//"><h1 class="header-title"> LearnOverpass</h1></a></header><ul>  <li class="docs-list-title"> <strong>Block Queries</strong></li> <li class=""> <a href="/learnoverpass/en/docs/block-queries/union/">Union</a></li> <li class=""> <a href="/learnoverpass/en/docs/block-queries/difference/">Difference</a></li> <li class=""> <a href="/learnoverpass/en/docs/block-queries/foreach/">For-each loop (foreach)</a></li>  <li class="docs-list-title"> <strong>Standalone Queries</strong></li> <li class=""> <a href="/learnoverpass/en/docs/standalone-queries/item/">Item</a></li> <li class=""> <a href="/learnoverpass/en/docs/standalone-queries/recurse-up/">Recurse Up (&lt;)</a></li>  <li class="docs-list-title"> <strong>Filters</strong></li> <li class=""> <a href="/learnoverpass/en/docs/filters/tag/">By Tag</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/bbox/">Bounding Box</a></li> <li class="docs-list-active"> <a href="/learnoverpass/en/docs/filters/recurse/">Recurse (n, w, r, bn, bw, br)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/input-set/">By Input Set</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/element-id/">By Element Id</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/around/">Relative to other elements (around)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/polygon/">By polygon (poly)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/newer/">Newer</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/changed/">By date of change (changed)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/user/">By user (user, uid)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/area/">By area (area)</a></li> <li class=""> <a href="/learnoverpass/en/docs/filters/pivot/">Area pivot (pivot)</a></li>  <li class="docs-list-title"> <strong>Actions</strong></li> <li class=""> <a href="/learnoverpass/en/docs/actions/print/">Print (out)</a></li>  </ul></div><div class="docs-content"><div class="content"> <script>
  (function() {
    var cx = '015815945200332182951:xrisyx6jrce';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script><gcse:search></gcse:search><h1 id="post-title"> Recurse (n, w, r, bn, bw, br) <small> <a class="docs-improve" href="https://github.com/osmlab/learnoverpass/edit/master/content/en/docs/filters/recurse.md">Improve page</a></small></h1><p><p>The recurse filter selects all elements that are members of an element from the input set or have an element of the input set as member, depending on the given parameter.</p>

<p>The input set can be changed with an adapted prefix notation. As for all filters, the result set is specified by the whole statement, not the individual filter.</p>

<p>It consists of an opening parenthesis. Then follows one of the symbols: w (forward from ways), r (forward from relations), bn (backward from nodes), bw (backward from ways), or br (backward from relations). Then follows an optional input set declaration. The filter ends with a closing parenthesis.</p>

<p>Examples with default input set:</p>

<pre><code>node(w);        // select child nodes from all ways of the input set
node(r);        // select node members of relations of the input set
way(bn);        // select parent ways for all nodes from the input set
way(r);         // select way members of relations from the input set
rel(bn);        // select relations that have node members from the input set
rel(bw);        // select relations that have way members from the input set
rel(r);         // select all members of type relation from all relations of the input set
rel(br);        // select all parent relations of all relations from the input set
</code></pre>

<p>Example with modified input set:</p>

<pre><code>node(w.foo);
</code></pre>

<p>You can also restrict the recurse to a specific role. Just add a colon and then the name of the role before the closing parenthesis.</p>

<p>Examples with default input set:</p>

<pre><code>node(r:&quot;role&quot;);        // select node members of relations of the input set
way(r:&quot;role&quot;);         // select way members of relations from the input set
rel(bn:&quot;role&quot;);        // select relations that have node members from the input set
rel(bw:&quot;role&quot;);        // select relations that have way members from the input set
rel(r:&quot;role&quot;);         // select all members of type relation from all relations of the input set
rel(br:&quot;role&quot;);        // select all parent relations of all relations from the input set
Example with modified input set:

node(r.foo:&quot;role&quot;);
</code></pre>

<p>And you can also search explicitly for empty roles:</p>

<pre><code>node(r:&quot;&quot;);
node(r.foo:&quot;&quot;);
</code></pre>

<div class="docs-repl">  <textarea>
// get nodes and ways from different bounding boxes.
(
  node[amenity=cafe]
  (0, 0, 5, 5);
  way[highway=cycleway]
  (47.0682, 15.4429, 47.0686, 15.444);
);
// but only print out the nodes that are
// childnodes from the ways of input set
node(w);
out;
</textarea><div class="docs-repl-result">  <iframe src="https://overpass-turbo.eu/map.html?silent&Q=%0a%2f%2f%20get%20nodes%20and%20ways%20from%20different%20bounding%20boxes.%0a%28%0a%20%20node%5bamenity%3dcafe%5d%0a%20%20%280%2c%200%2c%205%2c%205%29%3b%0a%20%20way%5bhighway%3dcycleway%5d%0a%20%20%2847.0682%2c%2015.4429%2c%2047.0686%2c%2015.444%29%3b%0a%29%3b%0a%2f%2f%20but%20only%20print%20out%20the%20nodes%20that%20are%0a%2f%2f%20childnodes%20from%20the%20ways%20of%20input%20set%0anode%28w%29%3b%0aout%3b%0a"  seamless="seamless" frameBorder="0" width="100%;"></iframe><textarea></textarea> <a class="docs-repl-change-output button" href="#">Data</a></div></div>
</p> <footer><p>Website released under MIT License. Documentation and Courses under GNU FDL. &copy; 2015</p> <small class="language-switch">     <a lang='en' href="//osmlab.github.io/learnoverpass//en/docs/filters/recurse/">English</a> | <a lang='de' href="//osmlab.github.io/learnoverpass//de/docs/filters/recurse/">Deutsch</a></small></footer></div></div></div> <script src="//osmlab.github.io/learnoverpass//js/vendor.bundle.js"></script> <script src="//osmlab.github.io/learnoverpass//js/docs.bundle.js"></script> </body></html>