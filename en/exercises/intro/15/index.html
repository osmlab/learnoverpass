<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><link href="http://gmpg.org/xfn/11" rel="profile"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title>Way Node Recursion</title><link rel="stylesheet" href="//osmlab.github.io/learnoverpass//css/main.css"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png"><link href="/favicon.png" rel="icon"><link href='https://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'><link href="" rel="alternate" type="application/rss+xml" title="LearnOverpass &middot; "/><meta name="description" content=""><meta name="keywords" content=""> </head><body><div class="exercise-contrib"><div> <a href="https://github.com/osmlab/learnoverpass/blob/master/CONTRIB.md">Contribute to project</a></div></div> <div class="menu-bar"><h1> <a href="//osmlab.github.io/learnoverpass//">LearnOverpass</a></h1></div><div class="exercise-container"><div class="exercise-lesson"><div class="exercise-lesson-bar"><div class="line">Intro</div></div><div class="exercise-lesson-inner"><div class="exercise-lesson-article"><h2> Way Node Recursion  <a class="docs-improve" href="https://github.com/osmlab/learnoverpass/edit/content/en/exercises/intro/15.md">Improve page</a></h2> <p>“Oh! I see that building!” Bob exclaims. “So the ATM is just on the other side, yes?”</p>

<p>As Bob walked to the building, he realized one important thing - he didn’t know where the entrance is! Looks like we need to write another query for him!</p>

<p>With the existing query, we’ve successfully found the building, but we need to further locate a specific point - the building’s entrance.</p>

<p>A building, since it’s generally a polygon when viewed from the map, is defined as a <code>way</code>. However, an entrance is usually just one point in the map - a point with a specific location. So how do you think they are represented in Overpass? If you’ve guessed by <code>node</code>s, then you’ve guessed right!</p>

<p>Remember when I told you that <code>way</code>s are just defined as an ordered list of nodes? Some of these nodes can be further tagged, taking different values such as entrances. In the next query, we’ll learn how to query for a specific node (an entrance) that is part of a <code>way</code>.</p>
</div><div class="exercise-lesson-instruction"><div class="exercise-lesson-label"> <span>Instructions</span></div> <ol>
<li>The first thing we need to do is to query for a specific <code>node</code> that is part of a <code>way</code>. The <code>recurse</code> filter does just that - it allows you to find the <code>node</code> from a <code>way</code>.</li>
<li>To do a <code>recurse</code> filter, you need to start with your target element, and a key for the source element inside parenthesis. In our example, our target element is a <code>node</code>, while our source element is a <code>way</code>, so we need to use the syntax <code>node(w);</code></li>
<li>The very important metaphor of ‘flowing’ data still holds for this query. Because of this, we need to ensure our <code>way</code> set is already available when we query for its nodes. So we need to place the query statement <code>node(w)</code> after the way is set, but before the <code>out;</code> statement.</li>
<li>If you try running the query now (seriously, go ahead!), you’ll see a bunch of nodes that define the look of our polygon. As told before, <code>way</code>s are just a bunch of <code>node</code>s, and with the <code>recurse</code> filter, we showed these nodes instead of the actual way.</li>
<li>While the <code>recurse</code> filter <em>recursed</em> through the <code>way</code> and returned the <code>node</code>s that make it up, we still need to further filter the <code>node</code>s to only show entrances. Luckily, we can use the filter <code>[entrance=yes]</code> for that.</li>
<li>Since we changed our output result set from a way to entrances (with <code>node(w)</code>), a bare <code>out</code> statement will work fine - make sure to remove the <code>geom</code> modificator!</li>
</ol>
</div></div></div><div class="docs-repl exercise-main"><div class="editor-cover"></div> <textarea>way[&#34;addr:city&#34;=Passau][name=&#34;Wirtschaftswissenschaften (WIWI)&#34;];
out geom;
</textarea><div class="exercise-fail-msg"><div class="message"> <span class="warning">That doesn't seem right!</span> <span class="hint">Use <code>node(w);</code></span></div></div><div class="exercise-action-bar"><div class="exercise-action-bar-inner winner-bar"><div> <span>Awesome Work!</span> <a href="" class="exercise-action-next">Go to Next Lesson</a></div></div><div class="exercise-action-bar-inner"><div> <a href="#" class="exercise-action-run">Run Query</a> <a href="#" class="exercise-action-reset">Reset Code</a></div></div></div><div class="docs-repl-result output"><iframe src="https://overpass-turbo.eu/map.html?silent" seamless="seamless" frameBorder="0"></iframe><textarea></textarea> <a class="docs-repl-change-output button" href="#">Data</a></div></div><div class="exercise-answer">way[&#34;addr:city&#34;=Passau][name=&#34;Wirtschaftswissenschaften (WIWI)&#34;];
node(w)[entrance=yes];
out;
</div><div class="exercise-regex"></div></div> <script src="//osmlab.github.io/learnoverpass//js/vendor.bundle.js"></script> <script src="//osmlab.github.io/learnoverpass//js/exercise.bundle.js"></script> </body></html>